# Persistent Storage with Docker VOlumes





## Introduction

Docker Volumes are the preferred mechanism for persisting data generated by and used by Docker containers.These volumes are completely managed by Docker. Volumes are often a better choice than persisting data in a container’s writable layer, because a volume does not increase the size of the containers using it, and the volume’s contents exist outside the lifecycle of a given container

![v](/Credmanagement/secretmgmt.PNG)

## Prerequisites

> 1. Azure VM with Docker installed and system managed identitiy enabled. Follow link to deploy Azure VM using packer.
> 2. Existing Container Image pulled from Azure Continer Registry.


1. Login to Docker VM via serial console or ssh.
2. Create a Docker Volume.
```
sudo docker volume create data1
```
3. Inspect the volume to see its properties
```
sudo docker volume inspect data1
```

4. Run container with a volume
```
sudo docker run -it --mount source=data1,target=/mnt testacr02.azurecr.io/samples/demoapp /bin/bash
```

5. test the volume for data persistency

- Navigate to mnt directory and create a "test" directory and then stop container by exit or stopping
```
cd mnt
mkdir test
ls
exit
```
- Now run the container again with the volume. "test" folder should exists

```
sudo docker run -it --mount source=data1,target=/mnt testacr02.azurecr.io/samples/demoapp /bin/bash
cd mnt
ls

```

